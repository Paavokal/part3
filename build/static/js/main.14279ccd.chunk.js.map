{"version":3,"sources":["services/contactsService.js","components/Notification.js","components/Filter.js","components/PersonForm.js","components/Persons.js","App.js","index.js"],"names":["baseUrl","exportedObject","getAll","axios","get","then","response","data","create","newObject","post","remove","id","delete","update","put","Notification","props","message","className","style","Filter","value","onChange","console","log","PersonForm","onSubmit","newName","nameChange","newNumber","numberChange","type","Persons","contactsToShow","deletePerson","map","person","name","number","onClick","App","useState","persons","setPersons","setNewName","setNewNumber","searchString","setSearchString","showAll","setShowAll","errorMessage","setErrorMessage","notificationStyle","setNotificationStyle","useEffect","contactService","initialPersons","length","filter","x","toLowerCase","includes","event","target","preventDefault","contactObject","personChange","some","e","currentPerson","find","newPersonNumber","window","confirm","returnedPerson","setTimeout","catch","error","newPersons","item","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.14279ccd.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst exportedObject = {getAll,create,remove, update}\r\n\r\nexport default exportedObject","import React from 'react'\r\nconst Notification = ( props ) => {\r\n    if (props.message === null) {\r\n      return null\r\n    }\r\n    return (\r\n      <div className={props.style}>\r\n        {props.message}\r\n      </div>\r\n    )\r\n  }\r\nexport default Notification","import React from 'react'\r\nconst Filter = ({value, onChange}) => {\r\n    return(\r\n        <div>\r\n        Filter shown with <input value={value} onChange={onChange}/>\r\n        {console.log(value)}\r\n        </div>\r\n    )\r\n  }\r\n  export default Filter","import React from 'react'\r\n\r\nconst PersonForm = ({onSubmit,newName,nameChange,newNumber,numberChange}) => {\r\n    return(\r\n      <form onSubmit={onSubmit}>\r\n          <div>\r\n            name:\r\n            <input \r\n              value={newName}\r\n              onChange={nameChange}         \r\n            />\r\n          </div>\r\n          <div>\r\n            number:\r\n            <input\r\n              value={newNumber}\r\n              onChange={numberChange}\r\n            />\r\n          </div>\r\n          <div>\r\n            <button type=\"submit\">add</button>\r\n          </div>\r\n        </form>\r\n    )\r\n  }\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Persons = ({contactsToShow, deletePerson}) => {\r\n    return (\r\n      <table>\r\n      <tbody> \r\n     {contactsToShow.map(person => \r\n      <tr key={person.name}>\r\n        <td>{person.name}</td>\r\n        <td>{person.number}</td>\r\n        <td><button onClick ={() => deletePerson(person.id, person.name)}>delete</button></td>\r\n      </tr>\r\n       )}\r\n       </tbody>\r\n     </table>\r\n  \r\n    )\r\n  }\r\n\r\nexport default Persons","import React, { useState, useEffect } from 'react'\nimport contactService from './services/contactsService.js'\nimport Notification from './components/Notification'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ searchString, setSearchString ] = useState('')\n  const [ showAll, setShowAll ] = useState (true)\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [notificationStyle, setNotificationStyle] = useState('basic')\n\n  useEffect(() => {\n    console.log('effect')\n    contactService\n      .getAll()\n      .then(initialPersons => {\n        console.log('promise fulfilled')\n        setPersons(initialPersons)\n      })\n  }, [])\n  console.log('render', persons.length, 'notes')\n\n \n  const addContact = (event) => {\n    event.preventDefault()\n\n    const contactObject = {\n      name: newName,\n      number: newNumber\n    }\n\n    const personChange = persons.some(e => e.name === newName)\n    const currentPerson = persons.find(e => e.name === newName)\n    const newPersonNumber = {...currentPerson, number: newNumber}\n    console.log(currentPerson, newPersonNumber)\n\n    if(personChange)\n    {\n      window.confirm(`${newName} is already added to phonebook! Replace the old number with a new one?`) &&\n        contactService\n          .update(currentPerson.id ,newPersonNumber)\n          .then(returnedPerson => {\n            setPersons(persons.map(person => person.id !== currentPerson.id ? person : returnedPerson))         \n            setNewName('')\n            setNewNumber('')\n            //notification\n            setNotificationStyle('basic')\n            setErrorMessage(`${contactObject.name} number changed!`)\n            setTimeout(()=> {\n             setErrorMessage(null)\n            },2000)\n          })\n          //error notification\n          .catch(error => {\n            setNotificationStyle('error')\n            setErrorMessage(`Person ${currentPerson.name} was already deleted from server`)\n            setTimeout(()=> {\n              setErrorMessage(null)\n            },2000) \n            const newPersons = persons.filter((item) => item.id !== currentPerson.id)\n            setPersons(newPersons)       \n          })\n    }\n    else {\n      contactService\n        .create(contactObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n          setNewName('')\n          setNewNumber('')\n          //notification\n          setNotificationStyle('basic')\n          setErrorMessage(`Added ${contactObject.name}`)\n          setTimeout(()=> {\n            setErrorMessage(null)\n          },2000)\n        })\n        .catch(error => {\n          setNotificationStyle('error')\n          setErrorMessage(error.response.data.error)\n          setTimeout(()=> {\n            setErrorMessage(null)\n          },2000)\n        })\n    }\n  }\n  const deletePerson = (id, name) => {\n    window.confirm(`Delete ${name}?`) &&\n      contactService\n        .remove(id)\n        .then(() => {\n          const newPersons = persons.filter((item) => item.id !== id)\n          setPersons(newPersons)\n          //notification\n          setNotificationStyle('basic')\n          setErrorMessage(`${name} deleted!`)\n          setTimeout(()=> {\n            setErrorMessage(null)\n          },2000)        \n        })\n        .catch(error => {\n          setNotificationStyle('error')\n          setErrorMessage(`Person ${name} was already deleted from server`)\n          setTimeout(()=> {\n            setErrorMessage(null)\n          },2000)\n          const newPersons = persons.filter((item) => item.id !== id)\n          setPersons(newPersons)\n        })\n  }\n\n  const handleNameChange = (event) => {\n    console.log(event.target.value)\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    console.log(event.target.value)\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    console.log(event.target.value)\n    setSearchString(event.target.value)\n    if(event.target.value !== '') {\n      setShowAll(false)\n    }\n    else {\n      setShowAll(true)\n    }\n  }\n\n  console.log(showAll, searchString)\n\n  const contactsToShow = showAll\n  ? persons\n  : persons.filter(x => x.name.toLowerCase().includes(searchString.toLowerCase()))\n\n  return (\n\n    <div>\n      <Notification message={errorMessage} style={notificationStyle}/>\n      <h2>Phonebook</h2>\n      <Filter value={searchString} onChange={handleFilterChange}/>\n\n      <h2>Add New </h2>\n      <PersonForm onSubmit={addContact} newName={newName} nameChange={handleNameChange} newNumber={newNumber} numberChange={handleNumberChange}/>\n      \n      <h2>Numbers</h2>\n      <Persons contactsToShow={contactsToShow} deletePerson={deletePerson}/>\n\n    </div>\n    \n  )\n\n}\n\nexport default App\n","import ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n)\n\n\n"],"sourceRoot":""}