(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(17),o=n.n(c),r=n(8),a=n(3),u=n(1),i=n(4),l=n.n(i),s="/api/persons",d={getAll:function(){return l.a.get(s).then((function(e){return e.data}))},create:function(e){return l.a.post(s,e).then((function(e){return e.data}))},remove:function(e){return l.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},update:function(e,t){return l.a.put("".concat(s,"/").concat(e),t).then((function(e){return e.data}))}},b=n(0),j=function(e){return null===e.message?null:Object(b.jsx)("div",{className:e.style,children:e.message})},f=function(e){var t=e.value,n=e.onChange;return Object(b.jsxs)("div",{children:["Filter shown with ",Object(b.jsx)("input",{value:t,onChange:n}),console.log(t)]})},h=function(e){var t=e.onSubmit,n=e.newName,c=e.nameChange,o=e.newNumber,r=e.numberChange;return Object(b.jsxs)("form",{onSubmit:t,children:[Object(b.jsxs)("div",{children:["name:",Object(b.jsx)("input",{value:n,onChange:c})]}),Object(b.jsxs)("div",{children:["number:",Object(b.jsx)("input",{value:o,onChange:r})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},m=function(e){var t=e.contactsToShow,n=e.deletePerson;return Object(b.jsx)("table",{children:Object(b.jsx)("tbody",{children:t.map((function(e){return Object(b.jsxs)("tr",{children:[Object(b.jsx)("td",{children:e.name}),Object(b.jsx)("td",{children:e.number}),Object(b.jsx)("td",{children:Object(b.jsx)("button",{onClick:function(){return n(e.id,e.name)},children:"delete"})})]},e.name)}))})})},O=function(){var e=Object(u.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1],o=Object(u.useState)(""),i=Object(a.a)(o,2),l=i[0],s=i[1],O=Object(u.useState)(""),g=Object(a.a)(O,2),v=g[0],x=g[1],p=Object(u.useState)(""),w=Object(a.a)(p,2),C=w[0],S=w[1],y=Object(u.useState)(!0),N=Object(a.a)(y,2),T=N[0],k=N[1],P=Object(u.useState)(null),A=Object(a.a)(P,2),D=A[0],E=A[1],J=Object(u.useState)("basic"),L=Object(a.a)(J,2),B=L[0],F=L[1];Object(u.useEffect)((function(){console.log("effect"),d.getAll().then((function(e){console.log("promise fulfilled"),c(e)}))}),[]),console.log("render",n.length,"notes");console.log(T,C);var I=T?n:n.filter((function(e){return e.name.toLowerCase().includes(C.toLowerCase())}));return Object(b.jsxs)("div",{children:[Object(b.jsx)(j,{message:D,style:B}),Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(f,{value:C,onChange:function(e){console.log(e.target.value),S(e.target.value),""!==e.target.value?k(!1):k(!0)}}),Object(b.jsx)("h2",{children:"Add New "}),Object(b.jsx)(h,{onSubmit:function(e){e.preventDefault();var t={name:l,number:v},o=n.some((function(e){return e.name===l})),a=n.find((function(e){return e.name===l})),u=Object(r.a)(Object(r.a)({},a),{},{number:v});console.log(a,u),o?window.confirm("".concat(l," is already added to phonebook! Replace the old number with a new one?"))&&d.update(a.id,u).then((function(e){c(n.map((function(t){return t.id!==a.id?t:e}))),s(""),x(""),F("basic"),E("".concat(t.name," number changed!")),setTimeout((function(){E(null)}),2e3)})).catch((function(e){F("error"),E("Person ".concat(a.name," was already deleted from server")),setTimeout((function(){E(null)}),2e3);var t=n.filter((function(e){return e.id!==a.id}));c(t)})):d.create(t).then((function(e){c(n.concat(e)),s(""),x(""),F("basic"),E("Added ".concat(t.name)),setTimeout((function(){E(null)}),2e3)}))},newName:l,nameChange:function(e){console.log(e.target.value),s(e.target.value)},newNumber:v,numberChange:function(e){console.log(e.target.value),x(e.target.value)}}),Object(b.jsx)("h2",{children:"Numbers"}),Object(b.jsx)(m,{contactsToShow:I,deletePerson:function(e,t){window.confirm("Delete ".concat(t,"?"))&&d.remove(e).then((function(){var o=n.filter((function(t){return t.id!==e}));c(o),F("basic"),E("".concat(t," deleted!")),setTimeout((function(){E(null)}),2e3)})).catch((function(o){F("error"),E("Person ".concat(t," was already deleted from server")),setTimeout((function(){E(null)}),2e3);var r=n.filter((function(t){return t.id!==e}));c(r)}))}})]})};n(41);o.a.render(Object(b.jsx)(O,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.b76e4d2e.chunk.js.map